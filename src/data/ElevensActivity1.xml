<!--
	This GradingRun describes how to set up Eclipse to grade Elevens Activity 1.
-->

<GradingRun>
	<!-- SourceRoot describes where the code is coming from. In this case, I'm
	pulling from a directory structure downloaded using Bannus's getRepos.py
	script that I've put at c:\temp\repos. I'm only grabbing cards that match
	the pattern 'activity1\card' so that I get Card and CardUnitTests from each
	student. -->
	<SourceRoot type="phabricator" path="c:\apcs\repos" copyToEclipse="true">
		<Filters>
			<Filter pattern="elevens"/>
			<Filter pattern="activity1\\"/>
		</Filters>
	</SourceRoot>
	
	<!-- EclipseProjectRoot describes the project I've created in Eclipse where
	I want the student code to be added. For each phabricator project I copy 
	from, I create a corresponding package in this Submissions project and copy
	the student's files there. -->
	<EclipseProjectRoot clear="true">
		c:\users\eric\workspace\submissions
	</EclipseProjectRoot>
	
	<!-- There are some files I want to add to each package, described here. As 
	part of grading, I'm going to run my own unit tests (CardOfficialTests.java)
	against the student code, so I copy those from my own workspace. I also want
	to run the student's unit tests against a "broken" version of Card.java, so I
	copy my BrokenCard.java into the package and copy the student's CardUnitTests.java
	to a file called BrokenCardUnitTests.java in each package. --> 
	<ExtraFiles>
		<File>c:\users\eric\onedrive\workspace\Elevens\src\activity1\CardOfficialTests.java</File>
		<File>c:\users\eric\onedrive\workspace\Elevens\src\activity1\BrokenCard.java</File>
		<File rename="BrokenCardUnitTests.java">{ECLIPSE_PROJECT_ROOT}\src\{PACKAGE}\CardUnitTests.java</File>
	</ExtraFiles>
	
	<!-- To make the BrokenCardUnitTests work, I need to do one more thing: I need
	to open up each BrokenCardUnitTests file (recall that this is a copy of the student's
	CardUnitTests file) and replace 'Card' with 'BrokenCard' -->
	<Updates>
		<Replace 
			name="update copy of student tests to run on broken cards" 
			pattern="Card" 
			replacement="BrokenCard" 
			fileFilter="BrokenCardUnitTests"/>
	</Updates>
	
	<!-- The framework can run arbitrary commands after the packages have been set
	up. -->
	<Commands>
		<!--Command>
			<Executable>cmd.exe</Executable>
			<Arguments>/c echo hello, world</Arguments>
			<Output>{ECLIPSE_PROJECT_ROOT}\src\{PACKAGE}\CardUnitTests.txt</Output>
		</Command-->
		<Command>
			<Executable>java</Executable>
			<Arguments>-cp \eclipse\plugins\org.junit_4.11.0.v201303080030\junit.jar;c:\eclipse\plugins\org.hamcrest.core_1.3.0.v201303031735.jar;c:\users\eric\workspace\testhelp\testhelp.jar;. org.junit.runner.JUnitCore {PACKAGE}.CardUnitTests</Arguments>
			<Output>{ECLIPSE_PROJECT_ROOT}\src\{PACKAGE}\CardUnitTests.txt</Output>
			<WorkingDirectory>{ECLIPSE_PROJECT_ROOT}\bin</WorkingDirectory>
		</Command>
		<Command>
			<Executable>java</Executable>
			<Arguments>-cp \eclipse\plugins\org.junit_4.11.0.v201303080030\junit.jar;c:\eclipse\plugins\org.hamcrest.core_1.3.0.v201303031735.jar;c:\users\eric\workspace\testhelp\testhelp.jar;. org.junit.runner.JUnitCore {PACKAGE}.CardOfficialTests</Arguments>
			<Output>{ECLIPSE_PROJECT_ROOT}\src\{PACKAGE}\CardOfficialTests.txt</Output>
			<WorkingDirectory>{ECLIPSE_PROJECT_ROOT}\bin</WorkingDirectory>
		</Command>
		<Command>
			<Executable>java</Executable>
			<Arguments>-cp \eclipse\plugins\org.junit_4.11.0.v201303080030\junit.jar;c:\eclipse\plugins\org.hamcrest.core_1.3.0.v201303031735.jar;c:\users\eric\workspace\testhelp\testhelp.jar;. org.junit.runner.JUnitCore {PACKAGE}.BrokenCardUnitTests</Arguments>
			<Output>{ECLIPSE_PROJECT_ROOT}\src\{PACKAGE}\BrokenCardUnitTests.txt</Output>
			<WorkingDirectory>{ECLIPSE_PROJECT_ROOT}\bin</WorkingDirectory>
		</Command>
	</Commands>
</GradingRun>